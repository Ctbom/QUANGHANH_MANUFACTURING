
@{
    ViewData["Title"] = "Chi_tiet_kiem_dinh";
    Layout = "~/Views/Shared/_Layout_CDVT.cshtml";
}


<div class="card">
    <div class="card-content">
        <div class="center">
            <h3><b>CHI TIẾT QUYẾT ĐỊNH</b></h3>
        </div>
        <div class="col s12">
            <div class="row table_container">
                <table class="striped centered table-bordered" id="DocumnetaryTable">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Mã thiết bị</th>
                            <th>Tên thiết bị</th>
                            <th>Vị trí điều động</th>
                            <th>Đơn vị sử dụng</th>
                            <th>Lý do sửa chữa</th>
                            <th>Loại sửa chữa</th>
                            <th>Trạng thái</th>
                            <th>Ngày dự kiến hoàn thành</th>
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>

    <link href="//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css" rel="stylesheet" />
    @section scripts{
        <script src="//cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js"></script>
        <script>

        $(document).ready(function () {
            var id = @ViewBag.id + "";
            DocumnetaryTable1 = $('#DocumnetaryTable')
                .on('preXhr.dt', function ( e, settings, data ) {
                    data.sessionId = "@ViewBag.id";
                } ).DataTable({
                "ajax": {
                    "url": "@Url.Action("Detail","ChitietKiemdinh")",
                    "type": "POST",
                    "datatype": "json",
                    },
                    "columns": [
                        { "data": "order_number", "name": "order_number" },
                        { "data": "documentary_id", "name": "documentary_id" },
                        { "data": "equipment_name", "name": "equipment_name" },
                        { "data": "department_id", "name": "department_id" },
                        { "data": "department_name", "name": "department_name" },
                        { "data": "repair_reason", "name": "repair_reason" },
                        { "data": "repair_type", "name": "repair_type" },
                        { "data": "reason", "name": "reason" },
                        {
                            "data": "finish_date_plan", "name": "finish_date_plan", "render": function (data) {
                                return dateFormat2(data);
                            },
                        }
                ],
                    "serverSide": true,
                    "order" : [0, "asc"]

            });
        });
            function dateFormat2(d) {
            var dateString = d.substr(6);
            var currentTime = new Date(parseInt(dateString));
            var month = currentTime.getMonth() + 1;
            var day = currentTime.getDate();
            var year = currentTime.getFullYear();
            var date = day + "/" + month + "/" + year;
            return (date);
        }
        </script>
    }

